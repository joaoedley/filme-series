{% if banners and banners|length > 0 %}
<div class="banner" id="banner">
  <div class="slides">
    {% for b in banners %}
      {% if b.trailer %}
      <div class="slide{% if forloop.first %} active{% endif %}">
        <video class="bgvid" src="{{ b.trailer }}" autoplay muted loop playsinline></video>
        <div class="caption">
          {% if b.trailer %}<span class="tag">Trailer</span>{% endif %}
        </div>
      </div>
      {% else %}
      <a class="slide{% if forloop.first %} active{% endif %}" href="{{ b.href }}" title="">
        <img src="{{ b.image }}" alt="" />
        <div class="caption">
          {% if b.trailer %}<span class="tag">Trailer</span>{% endif %}
        </div>
      </a>
      {% endif %}
    {% endfor %}
  </div>
  <button class="nav prev" aria-label="Anterior">‹</button>
  <button class="nav next" aria-label="Próximo">›</button>
  <div class="dots">
    {% for b in banners %}
      <button class="dot{% if forloop.first %} active{% endif %}" data-index="{{ forloop.counter0 }}" aria-label="Ir para {{ forloop.counter }}"></button>
    {% endfor %}
  </div>
</div>
<style>
  .banner{position:relative;overflow:hidden;border-radius:8px;margin:12px 0;background:#111}
  .banner .slides{position:relative;height:320px}
  .banner .slide{position:absolute;inset:0;opacity:0;transition:opacity .5s}
  .banner .slide.active{opacity:1}
  .banner img,.banner .bgvid{width:100%;height:100%;object-fit:cover;display:block}
  .banner .bgvid{position:absolute;inset:0}
  .banner .caption{position:absolute;left:16px;bottom:16px;background:rgba(0,0,0,.55);padding:8px 12px;border-radius:6px;color:#fff}
  .banner .caption .tag{background:#7c4dff;padding:2px 6px;border-radius:4px;font-size:12px}
  .banner .nav{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.45);border:none;color:#fff;font-size:28px;width:40px;height:40px;border-radius:50%;cursor:pointer}
  .banner .prev{left:8px}.banner .next{right:8px}
  .banner .dots{position:absolute;left:0;right:0;bottom:10px;display:flex;justify-content:center;gap:6px}
  .banner .dot{width:8px;height:8px;border-radius:50%;border:none;background:#777;opacity:.7;cursor:pointer}
  .banner .dot.active{background:#fff;opacity:1}
</style>
<script defer src="/static/js/banner.js"></script>
{% endif %}
